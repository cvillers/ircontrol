!function(t){var o=t.module("IRControlApp",["ng","ngMaterial","ngRoute"]),n=(function(){function t(){}return t}(),[{Title:"Control",URL:"control",Template:"control.html",Controller:"ControllerController"},{Title:"Schedule",URL:"schedule",Template:"schedule.html",Controller:"ScheduleController"}]);o.constant("NavLinks",n),o.config(["$routeProvider",function(o){t.forEach(n,function(t){o.when("/"+t.URL,{templateUrl:APP_GLOBAL_CONFIG.TemplatePrefix+"/"+t.Template,controller:t.Controller,resolve:{PageDefinition:function(){return t}}})}),o.otherwise("/control")}]);var e;!function(t){t[t.Unknown=0]="Unknown",t[t.Cool=1]="Cool",t[t.EnergySaver=2]="EnergySaver",t[t.Fan=3]="Fan"}(e||(e={}));var r=(function(){function t(){}return t}(),function(){function t(){}return t}(),function(){function t(){}return t}()),u=(function(){function t(t,o,n){this.$log=t,this.$q=o,this.$timeout=n,this.powerState=!1,this.fanMode=e.Fan}return t.prototype.GetButtons=function(){return this.$q.when([{Id:"fan_speed_up",Label:"Fan ↑"},{Id:"fan_speed_down",Label:"Fan ↓"},{Id:"temp_up",Label:"Temp ↑"},{Id:"temp_down",Label:"Temp ↓"}])},t.prototype.PushButton=function(t){this.$log.info("Push button "+t.Label);var o=this.$q.defer();return this.$timeout(function(){},5*(Math.random()+.01)).then(function(){if(Math.random()<.25){var t=new r;t.success=!1,o.reject("Request failed")}else{var t=new r;o.resolve()}}),o.promise},t.prototype.GetPowerState=function(){return this.powerState},t.prototype.SetPowerState=function(t){this.$log.debug("SetPowerState: transitioning to "+t),this.powerState=t},t.prototype.GetFanMode=function(){return this.fanMode},t.prototype.SetFanMode=function(t){this.$log.debug("SetFanMode: transitioning to "+t),this.fanMode=t},t}(),function(){function t(t,o,n){this._log=t,this._http=o,this._q=n}return t.prototype.GetButtons=function(){var t=this._q.defer();return this._http.get(APP_GLOBAL_CONFIG.API.GetButtons).success(function(o){t.resolve(o.buttons)}).error(function(o){t.reject(o)}),t.promise},t.prototype.PushButton=function(t){var o=this._q.defer(),n={name:t.Id};return this._http.post(APP_GLOBAL_CONFIG.API.PostButtonPress,n).success(function(t){o.resolve()}).error(function(t){o.reject(t)}),o.promise},t.prototype.GetPowerState=function(){return!0},t.prototype.SetPowerState=function(t){},t.prototype.GetFanMode=function(){return null},t.prototype.SetFanMode=function(t){},t}());t.module("IRControlApp").service("IRButtons",["$log","$http","$q",u]);var i=function(){function o(o,n,e){var r=this,u=this;this._scope=o,this._log=n,this._buttonService=e,this._buttonMap={},this._buttonService.GetButtons().then(function(o){u._buttons=o,t.forEach(u._buttons,function(t){u._buttonMap[t.Id]=t}),u._scope.Buttons=u._buttonMap},function(t){r._scope.Buttons={}}),this._scope.ControlState={Power:e.GetPowerState(),Mode:e.GetFanMode()},this._scope.PushButton=function(t){return r.PushButton(u,t)},this._scope.$watch(function(t){return t.ControlState.Power},function(t,o,n){return e.SetPowerState(t)}),this._scope.$watch(function(t){return t.ControlState.Mode},function(t,o,n){return e.SetFanMode(t)})}return o.prototype.PushButton=function(o,n){var e=this;o._buttonService.PushButton(this._buttonMap[n]).then(function(t){e._log.info("Pushed button "+n+" successfully")},function(o){var r="Could not push button "+n+": "+o;alert(t.toJson(r)),e._log.warn(r)})},o}();t.module("IRControlApp").controller("ControllerController",["$scope","$log","IRButtons",i]),t.module("IRControlApp").controller("MainController",["$scope","$location","$route","$mdSidenav","NavLinks",function(t,o,n,e,r){t.NavLinks=r,t.$on("$routeChangeSuccess",function(){t.CurrentPage={Title:n.current.locals.PageDefinition.Title,ActiveURL:o.path().replace(/^\//,"")}}),t.CurrentPage={Title:"blah",ActiveURL:o.path().replace(/^\//,"")},t.toggleSidenav=function(t){e(t).toggle()}}]),t.module("IRControlApp").controller("ScheduleController",["$scope",function(t){}])}(angular);
//# sourceMappingURL=app.js.map